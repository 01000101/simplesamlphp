{% set pagetitle = 'Metadata parser'|trans %}
{% extends "base.twig" %}

{%  set i=1 %}
{% block content %}
    <h2>{{ pagetitle }}</h2>
    <form method="post" class="pure-form" enctype="multipart/form-data">
        <p> {% trans 'XML metadata' %}</p>
        <div class="pure-control-group">
            <textarea name="xmldata" rows="20" class="textarea">{{ xmldata }}</textarea>
        </div>
        <br>
        <div class="center">
            <div class="pure-button-group" role="group">
                <label class="pure-button"><i class="fa fa-folder-open"> </i> Select a file...
                    <input type="file" name="xmlfile" class="hidden" multiple>
                </label>
                <label id="show-file" class="pure-button show-files" disabled>No file selected.</label>
            </div>
            <br>
            <button class="pure-button pure-input-1-3">{{ 'Parse'|trans }}</button>
        </div>
    </form>

    {% if output -%}
    <br>
    <h2>{{ 'Converted metadata'|trans }}</h2>
        {% for type, text in output if text -%}
    <div class="inline"></div>
    <h3> {{ type }}</h3>
    <div class="metadatabox">
        <button data-clipboard-target="#metadata{{ loop.index }}" id="btn{{loop.index }}" class="btn topright clipboard-btn" onclick="metadata({{ loop.index }})" >
            <img src="/{{ baseurlpath }}resources/icons/clipboard.svg"
                 alt="Copy to clipboard" />
        </button>
        <pre id="metadata{{ loop.index }}">{{ text }}</pre>
    </div>
            {%- set i=i+1 %}
        {%- endfor -%}
    {% endif -%}
{% endblock content -%}

